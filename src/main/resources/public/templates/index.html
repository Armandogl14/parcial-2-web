<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${titulo}">Pagina de Encuesta</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">
    <style>
        .navbar-brand,
        .nav-link {
            font-size: 20px; /* Cambiar el tamaño según sea necesario */
        }
        /*@media (max-width: 412px) {*/
        /*    .navbar {*/
        /*        font-size: 64px; !* Ajusta el tamaño de la fuente según sea necesario *!*/
        /*        padding: 50px; !* Aumenta el padding para dar más espacio *!*/
        /*        height: 10px; !* Ajusta la altura del navbar *!*/
        /*    }*/
        /*}*/
        @media only screen
        and (min-device-width: 375px)
        and (max-device-width: 667px)
        and (-webkit-min-device-pixel-ratio: 2) {
            .navbar {
                font-size: 14px; /* Ajusta el tamaño de la fuente según sea necesario */
                padding: 10px; /* Aumenta el padding para dar más espacio */
                height: auto; /* Ajusta la altura del navbar */
            }
            .navbar-brand{
                font-size: 64px;
            }
            .nav-link{
                font-size: 34px;
            }
            .centered {
                width: 700%; /* Ajusta el ancho según sea necesario */
            }

            .BottonCentered {
                width: 100%; /* Ajusta el ancho según sea necesario */
            }

            .larger-text h2 {
                font-size: 24px; /* Ajusta el tamaño de la fuente según sea necesario */
            }

            .larger-text a {
                font-size: 10px; /* Ajusta el tamaño de la fuente según sea necesario */
            }
            .BottonCentered  {
                text-align: center;
                margin: 0 auto;
                width: 20%;
            }
            .rounded-background-2 {
                background-color: cornflowerblue; /* Color del navbar */
                border-radius: 15px; /* Radio de borde redondeado */
                padding: 20px; /* Espacio interno para el contenido */
                margin-top: 20px; /* Espacio superior */
                margin-outside: auto;
                width: 1000px; /* Ajusta el ancho según sea necesario */
            }
            .BottonCentered.rounded-background-2 {
                width: 50%; /* Ajusta el ancho según sea necesario */
                height: auto; /* Ajusta la altura según sea necesario */
            }
        }

            /* Tus estilos aq
                /* Estilos adicionales para centrar y ajustar el ancho */
        .centered {
            text-align: center;
            margin: 0 auto;
            width: 50%;
        }

        .BottonCentered  {
            text-align: center;
            margin: 0 auto;
            width: 20%;
        }

        /* Estilos para el fondo y bordes redondeados */
        .rounded-background {
            background-color: cornflowerblue; /* Color del navbar */
            border-radius: 15px; /* Radio de borde redondeado */
            padding: 20px; /* Espacio interno para el contenido */
            margin-top: 20px; /* Espacio superior */
        }

        .rounded-background-2 {
            background-color: cornflowerblue; /* Color del navbar */
            border-radius: 15px; /* Radio de borde redondeado */
            padding: 20px; /* Espacio interno para el contenido */
            margin-top: 20px; /* Espacio superior */
        }

        /* Estilos para hacer el texto más grande */
        .larger-text h2{
            font-size: 54px; /* Tamaño de fuente más grande */
            color: #fff; /* Color del texto */
        }

        .larger-text a {
            font-size: 44px; /* Tamaño de fuente más grande */
            color: #fff; /* Color del texto */
        }

        /* Estilos para dispositivos móviles */
        a:hover {
            color: #000; /* Cambia el color del texto al pasar el mouse */
            background-color: #f0f0f0; /* Cambia el color de fondo al pasar el mouse */
        }

        /* Cambiar color de enlaces al ser presionado */
        a:active {
            color: #333; /* Cambia el color del texto al ser presionado */
            background-color: #dcdcdc; /* Cambia el color de fondo al ser presionado */
        }
        body {
             /*    background-image: url('ruta/de/la/imagen.jpg'); !* Cambia 'ruta/de/la/imagen.jpg' por la ruta de tu imagen de fondo !/
             /*    background-size: cover; !* Cubre todo el área del cuerpo !/
             /*    background-position: center; !* Centra la imagen en el cuerpo !/
             /}/
             /.navbar-brand {/
             /*    position: relative;*/
         }

        navbar-brand::after {
            /*    content: "";*/
            /*    background-image: url('ruta/de/la/imagen.jpg'); !* Cambia 'ruta/de/la/imagen.jpg' por la ruta de tu imagen !/
        /*    background-size: contain; !* Ajusta el tamaño de la imagen para que quepa !/
        /*    background-repeat: no-repeat; !* Evita que la imagen se repita !/
        /*    position: absolute;*/
            /*    top: 50%;*/
            /*    right: 0;*/
            /*    transform: translateY(-50%);*/
            /*    width: 30px; !* Ajusta el ancho según sea necesario !/
        /*    height: 30px; !* Ajusta la altura según sea necesario !/
         */
        }
    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-primary navbar-dark bg-primary">
        <a class="navbar-brand" href="#">Pagina de Encuesta</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item d-none d-sm-inline-block" th:unless="${session.username}">
                    <a href="/user/login" class="nav-link">Iniciar Sesion</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block" th:unless="${session.username}">
                    <a href="/user/register" class="nav-link">Registrar</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block" th:if="${session.username}">
                    <a href="/user/close" id="logoutButton" class="nav-link">Cerrar sesión</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block" th:if="${session.username and session.username.administrator}">
                    <a href="/user/list" class="nav-link">User List</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/encuesta/stored" class="nav-link" th:if="${session.username}">Sincronizar</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/registro" class="nav-link" th:if="${session.username and session.username.administrator}">Listar Registros</a>
                </li>

            </ul>
        </div>
    </nav>
</header>
<div class="centered rounded-background">
    <div class="larger-text">
        <h2>¡Llene Formulario Aquí!</h2>
    </div>
</div>
<div class="BottonCentered rounded-background-2">
    <div class="larger-text">
        <a href="/encuesta" class="nav-link">Presione Aquí</a>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logoutModalLabel">Cerrar sesión</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ¿Estás seguro de que quieres cerrar sesión?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <a href="/user/close" class="btn btn-primary">Cerrar sesión</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
<script src="../js/indexedDB.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function(){
            navigator.serviceWorker.register('/js/serviceWorker.js')
                .then(function(registration) {
                    console.log('Service Worker registered with scope:', registration.scope);
                })
                .catch(function(error) {
                    console.log('Service Worker registration failed:', error);
                });
        });
    }
    const express = require('express');
    const app = express();

    // Ruta para obtener un color aleatorio
    app.get('/getRandomColor', (req, res) => {
        // Generar un color aleatorio en formato hexadecimal
        const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16);

        // Devolver el color aleatorio como objeto JSON
        res.json({ color: randomColor });
    });

    // Escuchar en el puerto 3000
    app.listen(3000, () => {
        console.log('Servidor escuchando en el puerto 3000');
    });
    $(document).ready(function() {
        setInterval(function() {
            $.ajax({
                url: '/getRandomColor', // URL de tu endpoint que devuelve un color aleatorio
                type: 'GET',
                success: function(data) {
                    $('.BottonCentered.rounded-background-2').css('background-color', data.color);
                }
            });
        }, 500); // Ejecuta la función cada 1000 milisegundos (1 segundo)
    });
</script>
<script>
    $(document).ready(function() {
        $('#logoutButton').click(function(e) {
            e.preventDefault();
            $('#logoutModal').modal('show');
        });
    });
</script>
</body>
</html>